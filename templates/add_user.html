{% extends "base.html" %}{% block content %}

<div>
  <br />
  {% for message in get_flashed_messages() %}
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    Hey {{ name }} - {{ message }}
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>

  {% endfor %} {% if name %}
  <h1>User Added !!</h1>

  <br />
  <table class="table table-hover table-bordered table-striped">
    {% for our_user in our_users %}
    <tr>
      <td><a href="#">{{ our_user.id }}</a></td>
      <td><a href="#">{{ our_user.name }}</a></td>
      <td>{{ our_user.email}}</td>
      <td>{{ our_user.favorite_color}}</td>
      <td><a href="{{ url_for('delete', id=our_user.id) }}">Delete</a></td>
    </tr>

    {% endfor %}
  </table>
  {% else %}
  <h1>User List:</h1>
  <br />
  <form action="" method="POST">
    {{ form.hidden_tag() }} {{ form.name.label(class="form-label") }} {{
    form.name(class="form-control") }}
    <br />
    {{ form.email.label(class="form-label") }} {{
    form.email(class="form-control") }}
    <br />
    {{ form.favorite_color.label(class="form-label") }} {{
    form.favorite_color(class="form-control") }}
    <br />
    {{ form.submit(class="btn btn-secondary") }}
  </form>
  <br /><br /><br />
  <table class="table table-hover table-bordered table-striped">
    {% for our_user in our_users %}
    <tr>
      <td>
        <a href="{{ url_for('update', id=our_user.id) }}">{{ our_user.id }}</a>
      </td>
      <td>
        <a href="{{ url_for('update', id=our_user.id) }}"
          >{{ our_user.name }}</a
        >
      </td>
      <td>{{ our_user.email}}</td>
      <td>{{ our_user.favorite_color}}</td>
      <td><a href="{{ url_for('delete', id=our_user.id) }}">Delete</a></td>
    </tr>

    {% endfor %}
  </table>

  {% endif %}
</div>
{% endblock %}
